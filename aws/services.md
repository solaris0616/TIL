# AWS

Amazon Web Service

## Route53

* [【初心者向け】Amazon Route 53 とは](https://www.sunnycloud.jp/column/20210602-01/)
* DNS (Domain Name Server)
* DNSのフルマネージドサービス
  * ドメイン登録機能
  * DNSルーティング機能
  * DNSヘルスチェック機能
* 他のレジストラで既に管理しているドメインでも、基本的には管することが可能
  * [Amazon Route 53 に登録できる最上位ドメイン](https://docs.aws.amazon.com/ja_jp/Route53/latest/DeveloperGuide/registrar-tld-list.html)
* ルーティングポリシー
  * シンプルルーティング
  * フェイルオーバールーティング
  * 位置情報ルーティング
  * レイテンシーに基づくルーティング
  * 加重ルーティング

## WAF

* WAF (Web Application Firewall)
* Webアプリケーション層への攻撃を検知・遮断できるのが特徴（L7）
  * SQLインジェクション、クロスサイトスクリプティングなど
* メリット
  * 検知ルールのカスタマイズができる
  * 用途に応じてルールセットを追加することが可能
  * CloudFront, ALB, API GatewayでWAFを有効化するだけで導入準備OK
* v2の変更点
  * v1まではルールが10個までしか登録できなかった
  * v2ではルールの数ではなく重みを評価するようになった（＝キャパシティユニット）
  * 1つの WebACL に 1500 WebACL Capacity Unit (WCU) までルールに組み込める

## CloudFront

* CDN (Content Delivery Network)
* 動画、アプリケーション、静的、動的なコンテンツを迅速かつ安全に配信できるコンテンツデリバリネットワーク(CDN)サービス
* 各ユーザーの地理的に近い場所（エッジ）にあるサーバーから配信される
* エッジロケーションというデータセンターの世界的ネットワークを経由してコンテンツを配信する
  * ユーザーからのアクセスをエッジロケーションに誘導
  * エッジサーバーでコンテンツをキャッシュ
  * 配信の高速化とオリジンサーバーへの負荷を軽減
* オリジンサーバー
  * コンテンツが格納されているサーバーのこと
  * EC2やS3、ELBなどをオリジンサーバーとして使用可能
  * オンプレミスのサーバーを使用することも可能
* TTL (Time To Live)
  * キャッシュを保持する期間(秒)の設定のこと
* ディストリビューション
  * ドメイン毎に割り当てられるCloudFrontの設定のこと
  * EC2におけるインスタンスのようなもの

## S3

* Simple Storage Service
* 容量無制限のストレージサービス
  * 保存するデータは１ファイルにつき5TBまでという制限はあり
* 静的ウェブサイトのホスティングもできる
* Azure Blob Storage みたいなものっぽい

## API Gateway

* あらゆる規模の REST、HTTP、および WebSocket API を作成、公開、維持、モニタリング、およびセキュア化するための AWS のサービス
* RESTfulなAPIを作成することができる
* Lambdaと連携してサーバレスなアーキテクチャも実現できる
  * リクエストの受け口としてのAPI Gateway
  * Lambda関数を呼び出してバックエンド処理を行う
* APIの管理
  * トラフィック管理
  * CORSのサポート
  * 認可とアクセス制御
  * モニタリング
  * バージョン管理
* えっ、SpringBootによるバックエンド不要なのでは…？？

## ALB

* Application Load Balancer
* Webサービスにおける負荷（load）を分散させるロードバランシングサービス
* AWSではロードバランサーのサービスがELBと呼ばれ、4種類に分かれたうちの1つがALB
  * Elastic Load Balancing
* ALBとELBの違い
  * Webサービスにおける負荷を分散するALB
  * 高いパフォーマンスを必要とする環境の負荷を分散する NLB (Network Load Balancer)
  * 従来のELBは CLB (Classic Load Balancer) に名称変更
  * 仮想アプライアンスをクラウド上に展開・スケーリング・管理できる GLB (Gateway Load Balancer)
    * 仮想アプライアンスとは、仮想化技術を用いて、特定用途のアプリケーションソフトが稼働する環境を即座に構成できるようにしたもの

## VPC

* Virtual Private Cloud
  * 仮想ネットワーク内でのAWSリソースの起動
  * 論理的に分離されたセクションをプロビジョニングすることで、ユーザーに仮想プライベートクラウドを提供する商用クラウドコンピューティングサービス（？？？？？）
* AWSアカウント内に構築できる仮想ネットワーク
  * このネットワーク内にEC2などのAWSリソースを配置できる
* 1つのVPCを論理的なまとまりとして分離できる
* 複数のVPC間の接続も可能
* CIDR (Classless Inter-Domain Routing) サイダー
  * 使用可能なIPアドレスの範囲をCIDR形式で指定する
* [Amazon VPCを「これでもか！」というくらい丁寧に解説](https://qiita.com/c60evaporator/items/2f24d4796202e8b06a77)

## ECS

* Elastic Container Service
* コンテナを管理するためのフルマネージドサービス
* 構成要素
  * タスク定義(JSON)：タスクを作成するテンプレート定義
  * タスク：タスク定義に基づいて起動するコンテナの集まり
  * サービス：実行中のタスクを管理する
  * クラスター：サービスとタスクを実行する基盤
* そもそも、コンテナとは
  * アプリケーションとその実行環境を1つにまとめ上げて動作させる技術
  * アプリケーションに必要なものをまとめた箱
* コンテナオーケストレーター
  * 複数ホストで起動するコンテナを一元管理できる
  * コンテナのスケジューリング
  * コンテナのオートスケーリング
  * コンテナの死活監視
  * ロードバランシング

## Fargate

* Amazon Elastic Container Service (ECS) と Amazon Elastic Kubernetes Service (EKS) で動作する、ホストマシンを意識せずにコンテナを実行できる環境
* コンテナとコンテナの実行環境の2重管理が不要に
* ECSとの違いは、ホストマシンを意識せずにコンテナを実行できる点
* sshやdocker execでのコンテナアクセスをサポートしていません

## Aurora

* MySQLおよびPostgreSQLと互換性のあるクラウド向けのリレーショナルデータベースのこと
* Auroraの特異性
  * ストレージのインスタンスからの独立とProtection Groups
  * バックトラックによる時間指定の巻き戻し
  * クラスターキャッシュによる高速フェールオーバー
  * 並列クエリーによる高速化
  * Global Databaseによるリージョン障害対策
  * マルチマスターによる可用性

## ECR

* Elastic Container Registry
* フルマネージド Docker コンテナレジストリ
* コンテナイメージをプライベートに保管し、共有、管理、デプロイができるサービス
* ECSに統合されているため、開発から本稼働までのワークフローを簡略化

## EC2

* Elastic Compute Cloud
* Amazonが提供している仮想サーバー構築サービスです

## CloudマルチAZ構成

* AZ (Availability Zone) データセンタの集合の単位
* リージョンという大きい区分けの中に複数のAZがある
* 可用性が大幅に向上する（片方止まってもう片方があるし・・の理論）

## CloudFormation

* プロビジョニングおよび一サーバー設定のエリアにおける自動化および構成管理のためのサービス

